{% load static %}
<!doctype html>
<html>
<head>
<meta charset="utf-8">
</head>
<script type="text/javascript" src="{% static 'js/jquery-3.5.1.js'%}"></script>
<style type="text/css">
html, body {
	margin: 0 !important;
	padding: 0 !important;
	height: 100% !important;
	width: 100% !important;
	font-family: "微软雅黑";
}

td {
	padding: 0px;
	color:#595757;
	text-align: left;
}
.cleanfloat::after{
	display: block;
	clear: both;
	content:"";
	visibility: hidden;
	height: 0;
}
ul li{
	list-style:none;
	float:left;
	font-size:25px;
	margin-right:5px;
	color:#ccc;
	cursor:pointer;
}
.hs,.cs{
	color:#F8B500;
}

.loginSubmit{
	width: 160px;
	height: 40px;
	margin-left: 0px;
	margin-top: 30px;
	text-align: center;
	border: 1px solid gray;
	background-color:#7DCDF4;
}

.personal{
	position: absolute;
	width: 600px;
	height: 400px;
	z-index: 9999;
	display: none;
	background-color: white;
	/* 这里要注意绝对定位的盒子怎么在屏幕显示居中 */
	left: 50%;
	margin-left: -256px;
	margin-top: 142px;
	border: 1px solid gray;
}
/* 遮盖层 */
.bg{
	background-color: #000;
	width: 100%;
	height: 100%;
	top: 0px;
	position: fixed;
	opacity: 0.3;
	-webkit-opacity: 0.3;
	-moz-opacity: 0.3;
	display: none;
}
/* 登陆框标题 */
.personal-title{
	width: 100%;
	height: 40px;
	line-height: 40px;
	text-align: center;
	margin-bottom: 20px;
	cursor: move;
}
.personal-title span a{
	text-decoration: none;
	border: 0;
	font-size: 22px;
	color: skyblue;
	border-radius: 0px;
	width: 40px;
	height: 40px;
	background-color: #fff;
	position: absolute;
	top: 2px;
	right: 2px;
}

</style>
<script>
var score_array = [0,0,0,0,0,0,0,0,0,0];
var t_num = "{{score.t_num}}";
var t_name = "{{score.t_name}}";
var judges = "{{score.judges}}";
var date = "{{score.date}}";
var p_name = "{{score.p_name}}";
var score_all = 0;
var photo_list = "{{photo_list}}";
var score_list = "{{score}}";
var personnel_info = "{{personnel_info}}";

$(function () {
	$("ul li").hover(function(){
		$(this).addClass('hs');
		$(this).prevAll().addClass('hs');
	},function(){
		$(this).removeClass('hs');
		$(this).prevAll().removeClass('hs');
	})

	$("ul li").click(function () {
		$(this).addClass('cs');
		$(this).prevAll().addClass('cs');
		$(this).nextAll().removeClass('cs');
		var score = $(this).attr('data-id');
		var item = $(this).attr('data-name');
		score_array[item] = score;
	})
})
</script>
<body onload="load()">
<!-- 登陆框主体 -->
<div id="personal" class="personal">
<!-- 登陆框标题 -->
<div id="personal-title" class="personal-title">
	<span><a id="closeBtn" href="javascript:void(0)">×</a></span>
	<div align="left">
		<label>详细个人信息：</label>
	</div>
	<table cellspacing="0" cellpadding="0" border="0" align="center" width="100%" style="max-width: 500px;">
		<tr>
			<td width = "13%" valign="top">
				<table>
					<tr>
						<td style=" padding-top: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center;" align="top">个人信息
						</td>
					</tr>
					<tr>
						<td>
						<!--<img src="images/Image_200x200.png" width="84" height="84" />-->
						</td>
					</tr>
				</table>
			</td>
			<td width = "77%">
				<table width = "100%" id = "base_info" border="1" cellspacing="0">
				</table>
				<table border="1" cellspacing="0" width = "100%">
					<td id = "duty"style="width: 30%; height: 100px;padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; ">轮岗履历
					</td>
				</table>
				<table border="1" cellspacing="0" width = "100%">
					<td id = "excellent" style="width: 30%; height: 100px;padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 15px;">自己一年的亮点
					</td>
				</table>
				<table border="0" width = "100%">
					<td style="width: 80%; height: 100px;padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; line-height: 100px">点亮关注他，每组只能关注一位学员
					</td>
					<td>
						{% load static %}
						<img id="nice" src="{% static 'img/nice_1.jpg'%}" style= "width: 50px; height: 50px"/>
					</td>
				</table>
			</td>
		</tr>
	</table>
</div>
<!-- 登陆框表单 -->
<div id="personal-form">
	<div class="login-input">
		<label></label>
	</div>
</div>
</div>
<div id="bg" class="bg">sada</div>
{% load static %}
<div id="head_logo" style="width: 100%; height: 50px;background:rgba(ff,ff,ff,1.00); margin-left: 180px">
	<div id="head_left" style="width: 20%; float: left;">
		<img src="{% static 'img/logo.png'%}" style="width: 50px; height: 50px"/>
	</div>
	<div id="head_right" style="width: 80%; float: right;">
		<label style="width: 100%; font-size: 30px; color: #000000;" >应届生期满汇报</label>
	</div>
</div>
<div id="head" style="width: 100%; height: 5px;background:rgba(00,54,112,1.00)">
</div>
	<table cellspacing="0" cellpadding="0" border="1" align="center" width="100%" >
		<tr>
			<td style="padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{score.t_num}}队
		  </td>
			<td style="padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{photo_list.0.0}}
		  </td>
			<td style="padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{photo_list.1.0}}
		  </td>
			<td style="padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{photo_list.2.0}}
		  </td>
			<td style="padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{photo_list.3.0}}
		  </td>
			<td style="padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{photo_list.4.0}}
		  </td>
			<td style="padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{photo_list.5.0}}
		  </td>
		</tr>
		<tr id ="picture">
			<td style="width: 16%; padding-top: 10px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >{{score.t_name}}
			</td>
		</tr>
	</table>
	<table cellspacing="0" cellpadding="0" border="1" align="center" width="100%" >
		<!-- Line 1 -->
		<tr>
			<td rowspan="2" style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center"><b>感受</b><br>营造良好的演讲氛围
			</td>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >PPT布局美观，设计恰当
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score0_1" data-id = "1" data-name = "0">&#9733;</li>
					<li id = "score0_2" data-id = "2" data-name = "0">&#9733;</li>
					<li id = "score0_3" data-id = "3" data-name = "0">&#9733;</li>
					<li id = "score0_4" data-id = "4" data-name = "0">&#9733;</li>
					<li id = "score0_5" data-id = "5" data-name = "0">&#9733;</li>
				</ul>
			</td>
		</tr>
		<!-- Line 2 -->
		<tr>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >活跃气氛，引人入胜
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score1_1" data-id = "1" data-name = "1">&#9733;</li>
					<li id = "score1_2" data-id = "2" data-name = "1">&#9733;</li>
					<li id = "score1_3" data-id = "3" data-name = "1">&#9733;</li>
					<li id = "score1_4" data-id = "4" data-name = "1">&#9733;</li>
					<li id = "score1_5" data-id = "5" data-name = "1">&#9733;</li>
				</ul>
			</td>
		</tr>
		<!-- Line 3 -->
		<tr>
			<td rowspan="2" style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" ><b>流程</b><br>确保演讲顺畅及有节奏感
			</td>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >熟悉内容，演讲流畅
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score2_1" data-id = "1" data-name = "2">&#9733;</li>
					<li id = "score2_2" data-id = "2" data-name = "2">&#9733;</li>
					<li id = "score2_3" data-id = "3" data-name = "2">&#9733;</li>
					<li id = "score2_4" data-id = "4" data-name = "2">&#9733;</li>
					<li id = "score2_5" data-id = "5" data-name = "2">&#9733;</li>
				</ul>
			</td>
		</tr>
		<!-- Line 4 -->
		<tr>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >时间安排，控场节奏
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score3_1" data-id = "1" data-name = "3">&#9733;</li>
					<li id = "score3_2" data-id = "2" data-name = "3">&#9733;</li>
					<li id = "score3_3" data-id = "3" data-name = "3">&#9733;</li>
					<li id = "score3_4" data-id = "4" data-name = "3">&#9733;</li>
					<li id = "score3_5" data-id = "5" data-name = "3">&#9733;</li>
				</ul>
			</td>
		</tr>
		<!-- Line 5 -->
		<tr>
			<td rowspan="3" style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" ><b>内容</b><br>逻辑结构清晰且内容充实
			</td>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >案例出彩，形式新颖
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score4_1" data-id = "1" data-name = "4">&#9733;</li>
					<li id = "score4_2" data-id = "2" data-name = "4">&#9733;</li>
					<li id = "score4_3" data-id = "3" data-name = "4">&#9733;</li>
					<li id = "score4_4" data-id = "4" data-name = "4">&#9733;</li>
					<li id = "score4_5" data-id = "5" data-name = "4">&#9733;</li>
				</ul>
			</td>
		</tr>		
		<!-- Line 6 -->
		<tr>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >逻辑清晰，结构完整
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score5_1" data-id = "1" data-name = "5">&#9733;</li>
					<li id = "score5_2" data-id = "2" data-name = "5">&#9733;</li>
					<li id = "score5_3" data-id = "3" data-name = "5">&#9733;</li>
					<li id = "score5_4" data-id = "4" data-name = "5">&#9733;</li>
					<li id = "score5_5" data-id = "5" data-name = "5">&#9733;</li>
				</ul>
			</td>
		</tr>
		<!-- Line 7 -->
		<tr>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >剖析深刻，合理归纳
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score6_1" data-id = "1" data-name = "6">&#9733;</li>
					<li id = "score6_2" data-id = "2" data-name = "6">&#9733;</li>
					<li id = "score6_3" data-id = "3" data-name = "6">&#9733;</li>
					<li id = "score6_4" data-id = "4" data-name = "6">&#9733;</li>
					<li id = "score6_5" data-id = "5" data-name = "6">&#9733;</li>
				</ul>                                    
			</td>
		</tr>
		<!-- Line 8 -->
		<tr>
			<td rowspan="3" style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" ><b>技巧</b><br>基础演讲技巧
			</td>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >口齿清晰，表达准确
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score7_1" data-id = "1" data-name = "7">&#9733;</li>
					<li id = "score7_2" data-id = "2" data-name = "7">&#9733;</li>
					<li id = "score7_3" data-id = "3" data-name = "7">&#9733;</li>
					<li id = "score7_4" data-id = "4" data-name = "7">&#9733;</li>
					<li id = "score7_5" data-id = "5" data-name = "7">&#9733;</li>
				</ul>
			</td>
		</tr>
		<!-- Line 9 -->
		<tr>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >目光交流，台风自然
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score8_1" data-id = "1" data-name = "8">&#9733;</li>
					<li id = "score8_2" data-id = "2" data-name = "8">&#9733;</li>
					<li id = "score8_3" data-id = "3" data-name = "8">&#9733;</li>
					<li id = "score8_4" data-id = "4" data-name = "8">&#9733;</li>
					<li id = "score8_5" data-id = "5" data-name = "8">&#9733;</li>
				</ul>
			</td>
		</tr>
		<!-- Line 10 -->
		<tr>
			<td style="width: 33%; padding: 0px; font-size: 15px; mso-height-rule: exactly; line-height: 20px; text-align: center" >表现力强，应变力强
			</td>
			<td>
				<ul class="cleanfloat">
					<li id = "score9_1" data-id = "1" data-name = "9">&#9733;</li>
					<li id = "score9_2" data-id = "2" data-name = "9">&#9733;</li>
					<li id = "score9_3" data-id = "3" data-name = "9">&#9733;</li>
					<li id = "score9_4" data-id = "4" data-name = "9">&#9733;</li>
					<li id = "score9_5" data-id = "5" data-name = "9">&#9733;</li>
				</ul>
			</td>
		</tr>
	</table>
	
	<div align="center" style="margin: auto">
		<input id="return" value="返回" class="loginSubmit" onclick="submit()"/>
		<input id="loginSubmit" value="提交" class="loginSubmit" onclick="submit()"/>
	</div>
</body>
<script>
var tr=document.getElementById("picture");

{% for photo in photo_list %}
	var personal=document.getElementById('personal');
	var bg=document.getElementById('bg');
 	var img = document.createElement("img");
	var td = document.createElement("td");
	td.appendChild(img);
 	tr.appendChild(td);
 	var imageData = "{{photo.1}}".substring(7);
 	imageData = imageData.substring(0, imageData.length-6);

 	img.src = "data:image/jpg;base64," + imageData;
	img.style.width = "84px";
	img.style.height = "112px";
 	td.onclick = function requestAsync() {
		personal.style.display="block";
		bg.style.display="block";
		var param = "name={{photo.0}}";
         $.ajax({
             type: "POST",
             dataType: "json",
             url: "/app/personnel_info/",
             data: param,
             success: function (data) {
                console.log(data);
             	var duty=document.getElementById('duty');
             	duty.innerHTML = data.personnel_info.stage1 + "<br>" + data.personnel_info.stage2+ "<br>" + data.personnel_info.stage3+ "<br>" + data.personnel_info.stage4;
             	var excellent=document.getElementById('excellent');
             	excellent.innerHTML = data.personnel_info.excellent.replace("/\r\n/g","<br>");
             },
             error : function() {
                 alert("无法获取个人信息");
             }
         });
     };

	var closeBtn=document.getElementById('closeBtn');
	closeBtn.onclick=function(){
		personal.style.display="none";
		bg.style.display="none";
		return false;
	}
{% endfor %}


score_array[0] = {{score.score_1}};
score_array[1] = {{score.score_2}};
score_array[2] = {{score.score_3}};
score_array[3] = {{score.score_4}};
score_array[4] = {{score.score_5}};
score_array[5] = {{score.score_6}};
score_array[6] = {{score.score_7}};
score_array[7] = {{score.score_8}};
score_array[8] = {{score.score_9}};
score_array[9] = {{score.score_10}};

function load(){
	if (score_array[0] > 0) {
		document.getElementById("score0_" + score_array[0]).click();
	}
	if (score_array[1] > 0) {
		document.getElementById("score1_" + score_array[1]).click();
	}
	if (score_array[2] > 0) {
		document.getElementById("score2_" + score_array[2]).click();
	}
	if (score_array[3] > 0) {
		document.getElementById("score3_" + score_array[3]).click();
	}
	if (score_array[4] > 0) {
		document.getElementById("score4_" + score_array[4]).click();
	}
	if (score_array[5] > 0) {
		document.getElementById("score5_" + score_array[5]).click();
	}
	if (score_array[6] > 0) {
		document.getElementById("score6_" + score_array[6]).click();
	}
	if (score_array[7] > 0) {
		document.getElementById("score7_" + score_array[7]).click();
	}
	if (score_array[8] > 0) {
		document.getElementById("score8_" + score_array[8]).click();
	}
	if (score_array[9] > 0) {
		document.getElementById("score9_" + score_array[9]).click();
	}
}

function submit(){
	var temp = document.createElement("form");
	temp.action = '/app/scored/';
	temp.method = "post";
	var opt = document.createElement("textarea");
	opt.name = 't_num';
	opt.value = t_num;
	temp.appendChild(opt);
	var opt = document.createElement("textarea");
	opt.name = 't_name';
	opt.value = t_name;
	temp.appendChild(opt);
	var opt = document.createElement("textarea");
	opt.name = 'judges';
	opt.value = judges;
	temp.appendChild(opt);
	var opt = document.createElement("textarea");
	opt.name = 'date';
	opt.value = date;
	temp.appendChild(opt);
	var opt = document.createElement("textarea");
	opt.name = 'p_name';
	opt.value = p_name;
	temp.appendChild(opt);
	var opt = document.createElement("textarea");
	opt.name = 'p_name';
	opt.value = p_name;
	temp.appendChild(opt);
	for (var i= 0; i < 10; i++) {
		var opt = document.createElement("textarea");
		opt.name = 'score_' + (i+1);
		if((score_array[i] != "") || (score_array[i] != 'undefined')){
			opt.value = score_array[i];
		} else {
			opt.value = 0;
		}
		temp.appendChild(opt);
	}
	score_array.splice(0,score_array.length);
	document.body.appendChild(temp);
	temp.submit();
	document.body.removeChild(temp);
	return temp;	
}
 
function disp_prompt(id)
{
	var personal=document.getElementById('personal');
	var bg=document.getElementById('bg');
	// 1.点击"点击，弹出登陆框",弹出登陆窗口和遮盖层
	var judges=document.getElementById('judges');
	judges.onclick=function(){
		personal.style.display="block";
		bg.style.display="block";
		return false;
	}
	// 2.点击"关闭",隐藏登陆窗口和遮盖层
	var closeBtn=document.getElementById('closeBtn');
	closeBtn.onclick=function(){
		personal.style.display="none";
		bg.style.display="none";
		return false;
	}
}
</script>
</html>
